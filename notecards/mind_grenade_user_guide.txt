
                      Fourmilab Mind Grenade
                            User Guide

The Second Life Mind Grenade was created to celebrate the
fiftieth anniversary of the hardware Mind Grenade, built in the
fall of 1969.  For the story of the original Mind Grenade and
details of its construction and operation, see the Web document:

    https://www.fourmilab.ch/webtools/MindGrenade/

The Mind Grenade uses a linear-feedback shift register to
generate pseudorandom music which is played at a given tempo
(notes per second).  The shift register is 31 bits in length,
which provides a sequence of sufficient length that with the
default tempo of four notes per second the tune will not repeat
for over 17 years.  Nine lights show the state of the least
significant bits of the shift register (the original hardware
Mind Grenade used a 9-bit register) and can display in either
colour (based on a three bit history for each cell in the shift
register) or monochrome (showing only the current state of each
bit).

Touching anywhere on the Mind Grenade turns music on or off.
At the bottom of the Mind Grenade panel are four square buttons
which select which of 16 "tunes" are played by inverting bits
from the shift register.  The buttons glow green when inversion
is enabled and are grey otherwise.

You can control the Mind Grenade with the following commands
sent to local chat channel /1969 (the year the original Mind
Grenade was built).

    access owner/group/public
        Set which classes of users can send commands via chat.
        The who parameter should be one of public (anybody),
        group (members of the group to which the device
        belongs), or owner (owner of the device only).  The
        owner is always able to send commands regardless of this
        setting.  Default owner.

    channel n
        Change the chat channel on which the device listens for
        commands to n.  The new channel is echoed in chat to
        confirm the change.  The channel is reset to the default
        by the restart command.  Default 1969.

    help
        Give this document to the requester.

    restart
        Perform a hard restart, equivalent to creating a new
        copy of the device.  If the chat channel has been
        changed, it is reset to the default (1969, unless you've
        changed it by editing the script).  If you unlink pieces
        of the Mind Grenade, modify them, and then link them
        back together, be sure that the root prim (the one you
        link last) is the base plate behind the lights and that
        you perform a restart command (or, alternatively, reset
        the script from the editor or menu) before starting the
        music.

    set variable args
        Set the named variable to the given argument(s).  The
        following variables may be set.

        colour on/off
            If set to on (the default), each light on the front
            panel will show a colour based upon the last three
            values of a bit of the shift register.  If set to
            off, red lights will show just the current state of
            the bit.  You may also spell the variable as
            "color".

        tempo time
            Sets the tempo as the time in seconds that each note
            plays.  Default 0.25.  If you set the time longer
            than 1 second, there will be pauses between the
            notes.

        tune n
            The tones generated by the Mind Grenade are based upon
            bits from the shift register.  There are 16 possible
            mappings from the shift register to tones based upon
            inverting bits to determine the tone.  The tune
            variable, set from 0 to 15, is used as a bit mask to
            invert bits before they are used to select the tone
            to be played, and hence can select one of sixteen
            different tunes.  The current tune will be shown
            in binary by the buttons at the bottom of the panel.

        volume level
            Sets the music volume to a level between 0 (silent)
            and 1 (maximum).  Default 0.5.

    start
        Start the music.

    status
        Shows the current status of the device.

    stop
        Stop the music.

Details

    When you initially start the music, it will be somewhat
    irregular until all of the 15 possible notes have played.
    This is because the sound clips for the notes must be
    downloaded into the viewer of the person listening before
    they can be played.  It is possible to force this download
    with an API call of llPreloadSound(), but since this call
    delays the script by one full second, preloading all the
    sounds causes the script to go dormant for 15 seconds before
    responding.  I decided it's better to put up with a little
    jerkiness for the first few seconds than endure this long
    delay.  If you want to force pre-loading, edit the script
    and enable the commented-out code following the comment
    "Preload the sounds".  This still won't cure the delay for
    other people listening at the same time.

    If you'd like to make the Mind Grenade larger, edit it and
    stretch as desired.  Be sure to check "Stretch Textures" so
    the label at the top stretches with the object.  Due to
    limitations in stretching linked objects, you can't stretch
    the Mind Grenade smaller than its initial size without
    unlinking the pieces, scaling them individually, and then
    re-linking them.  As this object is delivered with full
    permissions, you're free to do this, but if you do be
    careful to reset the script before starting the music so
    that the linked components can be found.

    The original Mind Grenade hardware used a nine bit linear
    feedback shift register, with each light on the front panel
    showing the state of one of those bits.  For the Second Life
    implementation, freed from the limits of late 1960s
    integrated circuits, a 31 bit shift register is used, which,
    with the default tempo of 0.25 seconds, means that the music
    only repeats every 17 years.  Thirty-one lights on the front
    panel would be "busy" and increase the land impact of the
    device, so I opted to show only the least significant nine
    bits of the register, which include the four which determine
    the note that is played.  The front panel lights on the
    hardware Mind Grenade were red light-emitting diodes (LEDs)
    (somewhat exotic in 1969), which showed the on/off state of
    bits in the shift register.  This simulation keeps track of
    the last three states of each of the nine bits displayed and
    uses them to display one of eight colours.  To restore the
    "classic" LED look, send the chat command:
        /1969 set colour off
